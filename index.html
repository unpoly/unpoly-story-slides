<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <meta charset='utf-8'>
    <title>We're breaking up with Javascript frontends</title>
    <meta content='A framework for easily creating beautiful presentations using HTML' name='description'>
    <meta content='Hakim El Hattab' name='author'>
    <meta content='yes' name='apple-mobile-web-app-capable'>
    <meta content='black-translucent' name='apple-mobile-web-app-status-bar-style'>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui' name='viewport'>
    <link href='css/reveal.css' rel='stylesheet'>
    <link href='css/theme/blood.css' id='theme' rel='stylesheet'>
    <link href='css/custom.css' rel='stylesheet'>
    <!-- Code syntax highlighting -->
    <link href='lib/css/highlightjs/paraiso-dark.css' rel='stylesheet'>
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class='reveal'>
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class='slides'>
        <section>
          <h3>
            <div class='subtle'>
              It's not you, it's us
            </div>
            <div class='line'>
              We're breaking up with Javascript frontends
            </div>
          </h3>
          <p>
            Henning Koch, makandra GmbH
            <br>
            <a href='https://twitter.com/triskweline'>@triskweline</a>
          </p>
        </section>
        <section>
          <p>
            Give it 10 minutes.
          </p>
        </section>
        <section>
          <h3>Context</h3>
          <ul>
            <li>makandra is a Ruby on Rails consultancy</li>
            <li>We start a new application every 3 months</li>
            <li>
              We maintain apps for a <u>really</u> long time
              <ul>
                <li>50+ apps in maintenance</li>
                <li>Oldest app is from 2007</li>
              </ul>
            </li>
            <li>Will we be able to do this for another 9 years?</li>
          </ul>
        </section>
        <section>
          <h2>Tweet from 2025</h2>
          <img src='pictures/future_tweet.png'>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'></div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'></div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2005
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight3'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight2'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight2'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'></div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2008
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight4'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight4'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight2'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color2 is-weight3'>
                  RandomJS
                </div>
                <div class='complexity--slice is-color1 is-weight1'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2009
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color7 is-weight2'>
                  API
                </div>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight4'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight4'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight2'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color2 is-weight6'>
                  RandomJS
                </div>
                <div class='complexity--slice is-color1 is-weight2'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2011
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color8 is-weight1'>
                  Asset packing
                </div>
                <div class='complexity--slice is-color7 is-weight2'>
                  API
                </div>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight4'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight4'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight3'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color2 is-weight9'>
                  RandomJS
                </div>
                <div class='complexity--slice is-color1 is-weight3'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2013
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color8 is-weight1'>
                  Asset packing
                </div>
                <div class='complexity--slice is-color7 is-weight4'>
                  API
                </div>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight4'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight2'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight3'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color4 is-weight5'>
                  Models / API client
                </div>
                <div class='complexity--slice is-color3 is-weight5'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight3'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight6'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <div class='complexity'>
            <div class='complexity--title'>
              Complexity in 2015
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color8 is-weight1'>
                  Asset packing
                </div>
                <div class='complexity--slice is-color7 is-weight4'>
                  API
                </div>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight1'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight4'>
                  Models
                </div>
                <div class='complexity--slice is-color3 is-weight2'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight2'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight3'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Server
              </div>
            </div>
            <div class='complexity--side'>
              <div class='complexity--stack'>
                <div class='complexity--slice is-color6 is-weight1'>
                  Authorization
                </div>
                <div class='complexity--slice is-color5 is-weight2'>
                  Routing
                </div>
                <div class='complexity--slice is-color4 is-weight7'>
                  Models / API client
                </div>
                <div class='complexity--slice is-color3 is-weight6'>
                  Controllers
                </div>
                <div class='complexity--slice is-color2 is-weight3'>
                  Views
                </div>
                <div class='complexity--slice is-color1 is-weight7'>
                  Dependencies
                </div>
              </div>
              <div class='complexity--side-name'>
                Client
              </div>
            </div>
          </div>
          <p class='subtle xs' style='margin-top: 5px; text-align: center'>
            Based on chart by <a href="https://twitter.com/ryanstout">@ryanstout</a>
          </p>
        </section>
        <section>
          <p>
            A look back at the 7 AngularJS projects that we wrote from 2013-2016:
          </p>
          <div class='project-dots'>
            <div class='project-dots--row'>
              <div class='project-dots--dot'>1</div>
              <div class='project-dots--dot'>2</div>
              <div class='project-dots--dot'>3</div>
              <div class='project-dots--dot'>4</div>
              <div class='project-dots--dot'>5</div>
              <div class='project-dots--dot'>6</div>
              <div class='project-dots--dot'>7</div>
            </div>
          </div>
          <p>
            &nbsp;
          </p>
        </section>
        <section>
          <p>
            In hindsight, these are the projects that should have been a SPA:
          </p>
          <div class='project-dots'>
            <div class='project-dots--row'>
              <div class='project-dots--dot'>1</div>
              <div class='project-dots--dot is-positive'>2</div>
              <div class='project-dots--dot'>3</div>
              <div class='project-dots--dot is-positive'>4</div>
              <div class='project-dots--dot'>5</div>
              <div class='project-dots--dot'>6</div>
              <div class='project-dots--dot'>7</div>
            </div>
          </div>
          <p>
            YMMV.
          </p>
        </section>
        <section>
          <h3>Learnings from 3 years of SPAs</h3>
          <ol>
            <li>
              SPAs are a good fit for a certain class of UI.
              <br>
              For us that class is the exception, not the default.
            </li>
            <li>
              There's a trade-off between ambitious UI and code complexity.
            </li>
            <li>
              We think we can fix most of the problems with server-side apps
              <br>
              and find a new sweet spot in that trade-off.
            </li>
          </ol>
        </section>
        <section>
          <h3>
            What server-side apps
            <div class='green'>
              do well
            </div>
          </h3>
          <ol>
            <li>Wide choice of great and mature languages</li>
            <li>Low complexity stack</li>
            <li>Synchronous data access</li>
            <li>Time to first render</li>
            <li>Works on low-end devices</li>
          </ol>
        </section>
        <section>
          <h3>
            What server-side apps
            <div class='red'>
              don't do well
            </div>
          </h3>
          <ol>
            <li>Slow interaction feedback</li>
            <li>
              Page loads destroy transient state
              <div class='subtle'>(scroll positions, unsaved form values, focus)</div>
            </li>
            <li>
              Layered interactions are hard
              <div class='subtle'>(modals, drop-downs, drawers)</div>
            </li>
            <li>Animation is complicated</li>
          </ol>
        </section>
        <section>
          <h3>Demo of server-side app issues</h3>
          <p>
            <a href='http://demo.unpoly.com/' target='_blank'>
              Link to demo app
            </a>
            <br>
            <span class='subtle'>(press <i>Start Classic</i> on first page)</span>
          </p>
          <br>
          <h4>
            Things to try and observe:
          </h4>
          <ul>
            <li>
              <div class='line'>Navigate between cards in the left pane</div>
              <div class='red'>Scroll positions get lost in both panes</div>
            </li>
            <li>
              <div class='line'>Open the second page ("More cards" link at the bottom of the left pane)</div>
              <div class='red'>Card in the right pane gets lost</div>
            </li>
            <li>
              <div class='line'>Edit a card, change the title, then change the pattern</div>
              <div class='red'>Unsaved form content is gone when returning from the pattern selection</div>
            </li>
          </ul>
        </section>
        <section>
          <img class='right' height='200' src='pictures/html6.png' style='margin-right: 180px'>
          <h3>Thought experiment</h3>
          <p>
            Imagine HTML6 was all about server-side apps
          </p>
          <p>
            What features would be in that spec?
            <br>
            <span>
              <span class='subtle'>Partial page updates?</span>
            </span>
            <br>
            <span>
              <span class='subtle'>Animated transitions?</span>
            </span>
            <br>
            <span>
              <span class='subtle'>Layered interactions?</span>
            </span>
          </p>
          <p class='fragment'>
            We can polyfill all of that!
            <br>
            <span class='subtle'>Because it's 2016 and Javascript is now fast.</span>
          </p>
        </section>
        <section>
          <h2>
            <img class='plain' src='pictures/logos/unpoly.png' width='50%'>
          </h2>
          <ul>
            <li>25 new HTML attributes to write modern UI, but keep logic on the server</li>
            <li>Works with existing code</li>
            <li>
              Backend-agnostic
              <div class='subtle'>
                (although we have some really nice Rails bindings)
              </div>
            </li>
            <li>In development for two years and in production with multiple apps</li>
          </ul>
        </section>
        <section>
          <h3>Demo of Unpoly-enhanced app</h3>
          <p>
            <a href='http://demo.unpoly.com/' target='_blank'>
              Link to demo app
            </a>
            <br>
            <span class='subtle'>(press <i>Start Enhanced</i> on first page)</span>
          </p>
          <h4>
            Things to try and observe:
          </h4>
          <ol>
            <li>
              <div class='line'>Navigate between cards, open and cancel the form</div>
              <div class='green'>Page transitions are animated</div>
            </li>
            <li>
              <div class='line'>Navigate between cards in the left pane</div>
              <div class='green'>Scroll positions are kept in both panes</div>
            </li>
            <li>
              <div class='line'>Open the second page ("More cards" link at the bottom of the left pane)</div>
              <div class='green'>New page slides in smoothly</div>
              <div class='green'>Card in the right pane is kept</div>
            </li>
            <li>
              <div class='line'>Edit a card, change the title, then change the pattern</div>
              <div class='green'>Pattern selection happens in a modal dialog, <br>preserving unsaved form values</div>
            </li>
            <li>
              <div class='line'>Inspect links and see attributes with <code>up-*</code> prefix</div>
              <div class='gray'>
                See docs for <a href="http://unpoly.com/a-up-target"><code>[up-target]</code></a> and
                <a href="http://unpoly.com/up-modal"><code>[up-modal]</code></a>
              </div>
            </li>
          </ol>
        </section>
        <section>
          <h3>Classic page flow</h3>
          <img src='pictures/fragment_flow_vanilla.svg' style='margin-bottom: 10px' width='100%'>
          <p>
            Server renders full pages on every request.
            <br>
            Any state that's not in the URL gets lost when switching pages.
          </p>
        </section>
        <section>
          <h3>Unpoly page flow</h3>
          <img src='pictures/fragment_flow_unpoly.svg' style='margin-bottom: 10px' width='100%'>
          <p>
            Server still renders full pages, but we only use fragments.
            <br>
            This solves most of our problems with transient state being destroyed.
          </p>
        </section>
        <section>
          <h3>
            Update a page fragment
            <div class='subtle'>
              without Javascript
            </div>
          </h3>
          <p>
            <a href='http://unpoly.com/examples/update-fragment/' target='_blank'>Run example on unpoly.com</a>
          </p>
          <pre class='xs'><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" <mark>up-target=".story"</mark>&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <ul>
            <li>Unpoly requests <code>full.html</code> via AJAX</li>
            <li>Server returns a <u>full HTML page</u> as usual</li>
            <li>Unpoly extracts the fragment that matches <code>.story</code></li>
            <li>Unpoly swaps the old and new fragment</li>
            <li>Unpoly changes the browser URL to <code>http://host/full.html</code></li>
          </ul>
        </section>
        <section>
          <h3>
            Update a page fragment
            <div class='subtle'>
              without Javascript
            </div>
          </h3>
          <div class='columns'>
            <div class='column'>
              <h4 class='subtle'>short.html</h4>
              <pre class='xxs'><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" <mark>up-target=".story"</mark>&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;&#x000A;<mark>&lt;p&gt;This text won't change&lt;/p&gt;</mark>&#x000A;</code></pre>
            </div>
            <div class='column'>
              <h4 class='subtle'>full.html</h4>
              <pre class='xxs'><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;h1&gt;Full story&lt;/h1&gt;&#x000A;&#x000A;  &lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="short.html" <mark>up-target=".story"&gt;</mark>&#x000A;    Read summary&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;</code></pre>
            </div>
          </div>
          <ul>
            <li>Unpoly requests <code>full.html</code> via AJAX</li>
            <li>Server returns a <u>full HTML page</u> as usual</li>
            <li>Unpoly extracts the fragment that matches <code>.story</code></li>
            <li>Unpoly swaps the old and new fragment</li>
            <li>Unpoly changes the browser URL to <code>http://host/full.html</code></li>
          </ul>
        </section>
        <section>
          <h3>Appending instead of replacing</h3>
          <pre><code class='html' data-noescape>&lt;div class="tasks"&gt;&#x000A;  &lt;li&gt;Wash car&lt;/li&gt;&#x000A;  &lt;li&gt;Purchase supplies&lt;/li&gt;&#x000A;  &lt;li&gt;Fix tent&lt;/li&gt;&#x000A;&lt;/ul&gt;&#x000A;&#x000A;&lt;a class="next-page" href="/tasks?page=2"&#x000A;  up-target="<mark>.tasks:after</mark>, .next-page"&gt;Next page&lt;/a&gt;&#x000A;</code></pre>
          <p>
            This appends the second page to the task list
            and replaces the "Next page" button with a link to page 3.
          </p>
        </section>
        <section>
          <h3>Layers</h3>
          <div class='layers'>
            <div class='layers--layer is-document'>
              Document
              <div class='layers--url'>
                http://app/list
              </div>
            </div>
            <div class='layers--layer is-modal'>
              Modal
              <div class='layers--url'>
                http://app/new
              </div>
            </div>
            <div class='layers--layer is-popup'>
              Popup
              <div class='layers--url'>
                http://app/search
              </div>
            </div>
          </div>
          <p>Unpoly apps may stack up to three HTML pages on top of each other</p>
          <p>Each layer has its own URL and can navigate without changing the others</p>
          <p>Use this to <b>keep context</b> during interactions</p>
        </section>
        <section>
          <img src='pictures/gmail.png'>
        </section>
        <section>
          <img src='pictures/gmail_layers.png'>
        </section>
        <section>
          <h3>
            Open fragment in modal dialog
            <div class='subtle'>
              without Javascript
            </div>
          </h3>
          <p>
            <a href='http://unpoly.com/examples/modal/'>Run example on unpoly.com</a>
          </p>
          <pre class='xs'><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" <mark>up-modal=".story"</mark>&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <ul>
            <li>Unpoly requests <code>full.html</code> via AJAX</li>
            <li>Server returns a <u>full HTML page</u> as usual</li>
            <li>Unpoly extracts the fragment that matches <code>.story</code></li>
            <li><mark>Unpoly displays the new fragment in a <code>&lt;div class="up-modal"&gt;</code></mark></li>
            <li>Unpoly changes the browser URL to <code>http://host/full.html</code></li>
          </ul>
        </section>
        <section>
          <h3>
            Open fragment in a popup menu
            <div class='subtle'>
              without Javascript
            </div>
          </h3>
          <p style='visibility: hidden'>
            <a href='http://unpoly.com/examples/modal/'>Run example on unpoly.com</a>
          </p>
          <pre class='xs'><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" <mark>up-popup=".story"</mark>&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <ul>
            <li>Unpoly requests <code>full.html</code> via AJAX</li>
            <li>Server returns a <u>full HTML page</u> as usual</li>
            <li>Unpoly extracts the fragment that matches <code>.story</code></li>
            <li><mark>Unpoly displays the new fragment in a <code>&lt;div class="up-popup"&gt;</code></mark></li>
            <li>Unpoly changes the browser URL to <code>http://host/full.html</code></li>
          </ul>
        </section>
        <section>
          <h3>Navigation</h3>
          <ul>
            <li>
              All fragment updates change the browser URL by default.
            </li>
            <li>
              <div class='line'>
                Back/Forward buttons work as expected.
              </div>
              <div class='subtle'>
                Even scroll positions are restored.
              </div>
            </li>
            <li>
              <div class='line'>
                Linking to a fragment will <b>scroll the viewport</b> to reveal the fragment.
              </div>
              <div class='subtle'>
                Unpoly is aware of fixed navigation bars and will scroll further/less.
              </div>
            </li>
            <li>
              Links to the current URL get an <a href="http://unpoly.com/up-current"><code>up-current</code></a>
              class automatically.
            </li>
            <li>
              <div class='line'>
                Modals and popups have their own URL.
              </div>
              <div class='subtle'>
                When a modal closes, the background URL is restored.
              </div>
            </li>
            <li>
              <div class='line'>
                Use <a href="http://unpoly.com/up-back"><code>[up-back]</code></a> to link to a previous state.
              </div>
              <div class='subtle'>
                That's a real link with a URL, not <code>location.back()</code>
              </div>
            </li>
            <li>
              <div class='line'>
                Everything is opt-in
              </div>
              <div class='subtle'>
                Links without <code>up-target</code> will do a regular page load.<br>
                This is different to Turbolinks, where you need to opt-out.
              </div>
            </li>
          </ul>
        </section>
        <section>
          <h3>But I have this really custom <span class="subtle">Javascript / jQuery library / behavior</span> that I need to integrate</h3>
          <p>
            Don't worry, we actually allow for massive customization:
          </p>
          <ul>
            <li>Pairing Javascript snippets with HTML elements</li>
            <li>Integrating libraries (WYSIWYG editor, jQuery plugins, ...)</li>
            <li>Passing structured data to Javascript snippets</li>
            <li>Reuse existing Unpoly functionality from your own code</li>
            <li>Invent your own UJS syntax</li>
            <li>Configure defaults</li>
          </ul>
        </section>
        <section>
          <h3>Activating JS snippets</h3>
          <p>
            Every app needs a way to pair Javascript snippets<br />with certain HTML elements:
          </p>
          <ul>
            <li>An <code>a[title]</code> attribute should activate qTip on mouseover</li>
            <li>A <code>textarea.wysiwyg</code> should activate Redactor on load</li>
            <li>
              An <code>input[type=search]</code> field should automatically request new results
              <br>
              when the user types something
            </li>
            <li>
              A <code>.map</code> should render a map with pins via the Google Maps JS API
            </li>
            <li>
              A <code>.button.toggle-all</code> should toggle all checkboxes in a form
              <br>
              when clicked
            </li>
          </ul>
        </section>
        <section>
          <h3>
            <div class='line'>
              Activating JS snippets
            </div>
            <div class='subtle'>
              Random.js
            </div>
          </h3>
          <pre><code class='html' data-noescape>&lt;div class="map"&gt;&lt;/span&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>$(function() {&#x000A;  $('.map').each(function() {&#x000A;    new google.maps.Map(this);&#x000A;  });&#x000A;});&#x000A;</code></pre>
          <p>
            This is what you see in jQuery tutorials.
            <br>
            <span class='red'>HTML fragments loaded via AJAX don't get Javascriptified.</span>
          </p>
        </section>
        <section>
          <h3>
            <div class='line'>
              Activating JS snippets
            </div>
            <div class='subtle'>
              Unpoly
            </div>
          </h3>
          <pre><code class='html' data-noescape>&lt;div class="map"&gt;&lt;/span&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>up.compiler('.map', function($map) {&#x000A;  new google.maps.Map($map, { center: pin });&#x000A;});&#x000A;&#x000A;&#x000A;</code></pre>
          <p>
            Unpoly automatically compiles all fragments that it inserts or updates.
            <br>
            On the first page load, the entire document is compiled.
          </p>
        </section>
        <section>
          <h3>
            <div class='line'>Getting data into your JS</div>
            <div class='subtle'>Random.js</div>
          </h3>
          <pre><code class='html' data-noescape>&lt;div class="map"&gt;&lt;/div&gt;&#x000A;&#x000A;&lt;script type="text/javascript"&gt;&#x000A;  initMap($('.map'), { lat: 48.75, lng: 11.45 });&#x000A;&lt;/script&gt;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>function initMap($element, pin) {&#x000A;  new google.maps.Map($element, { center: pin });&#x000A;});&#x000A;&#x000A;&#x000A;</code></pre>
          <p>
            &nbsp;
            <br>
            &nbsp;
          </p>
        </section>
        <section>
          <h3>
            <div class='line'>Getting data into your JS</div>
            <div class='subtle'>Unpoly</div>
          </h3>
          <pre><code class='html' data-noescape>&lt;div class="map" up-data="{ lat: 48.36, lng: 10.99 }"&lt;/div&gt;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, <mark>pin</mark>) {&#x000A;  new google.maps.Map($element, center: pin);&#x000A;});&#x000A;&#x000A;&#x000A;</code></pre>
          <p>
            The <code>up-data</code> attribute value is parsed as JSON and passed
            <br>
            to your compiler as a Javascript object.
          </p>
        </section>
        <section>
          <h2>Response times</h2>
        </section>
        <section>
          <h3>Response times</h3>
          <ul class='s'>
            <li>
              <b>0.1 second</b> is about the limit for having the user feel that the system is reacting
              instantaneously,
              <span class="subtle">meaning that no special feedback is necessary except to display the
              result.</span>
            </li>
            <li>
              <b>1.0 second</b> is about the limit for the user's flow of thought to stay uninterrupted, even
              though the user will notice the delay. <span class="subtle">Normally, no special feedback is necessary during
              delays of more than 0.1 but less than 1.0 second, but the user does lose the feeling of
              operating directly on the data.</span>
            </li>
            <li>
              <b>10 seconds</b> is about the limit for keeping the user's attention focused on the dialogue.
              <span class="subtle">
              For longer delays, users will want to perform other tasks while waiting for the computer
              to finish, so they should be given feedback indicating when the computer expects to be
              done. Feedback during the delay is especially important if the response time is likely to
              be highly variable, since users will then not know what to expect.</span>
            </li>
          </ul>
          <p>
            <cite>
              Miller 1968; Card et al. 1991; Jacob Nielsen 1993
            </cite>
          </p>
          <p>
            Also see Google's <a href="https://developers.google.com/web/tools/chrome-devtools/profile/evaluate-performance/rail">RAIL Performance Model</a>.
          </p>
        </section>
        <section>
          <h3>
            <div class='subtle'>
              Reponse times
            </div>
            <div class='line'>
              Baseline: AngularJS
            </div>
          </h3>
          <p>
            We want to approximate the snappiness of a AngularJS SPA
            <br>
            (since we're happy with those). So let's take a closer look:
          </p>
          <ul>
            <li>
              Most of our AngularJS interactions are making API requests
              <br>
              and are thus bound by server speed.
            </li>
            <li>
              <div class='line'>
                Rendering to JSON takes time, too.
              </div>
              <div class='subtle'>
                60-300ms for index views in non-trivial app
              </div>
            </li>
            <li>
              <div class='line'>
                Client-side rendering takes time, too.
              </div>
            </li>
            <li>
              <div class='line'>
                Users do like the instantaneous feedback
              </div>
              <div class='subtle'>
                (even if it just shows to an empty screen that is then populated over the wire)
              </div>
            </li>
          </ul>
        </section>
        <section>
          <h3>
            <div class='subtle'>
              Response times
            </div>
            <div class='line'>
              Unpoly's approach
            </div>
          </h3>
          <ul>
            <li>
              Provide instantaneous feedback to all user input
              so interactions<br>appear faster than they really are
            </li>
            <li>Pick <u>all</u> the low-hanging fruit that's wasting 100s of milliseconds</li>
            <li>Free up enough time budget that we can afford to render<br>full pages on the server</li>
            <li>Use best practices for server performance</li>
            <li>Provide options if all that is not enough</li>
          </ul>
        </section>
        <section>
          <h3>What you get out of the box</h3>
          <ul>
            <li>
              We no longer parse and execute CSS, Javascript and build the DOM on every request
              <div class='subtle'>
                makandra deck on Cards (140 ms), AMC frontend (360 ms)
              </div>
            </li>
            <li>
              Clicked links/forms get an <a href="http://unpoly.com/up-active"><code>up-active</code></a> class while loading
              <div class='subtle'>
                Get into a habit of styling <code>.up-active</code> for instantaneous feedback<br>
                Use throttling and Chrome's network tab
              </div>
            </li>
            <li>
              Links with an <a href="http://unpoly.com/up-instant"><code>up-instant</code></a> attribute load on <code>mousedown</code> instead of <code>click</code>
              <div class='subtle'>
                Saves ~70 ms with a mouse (<a href="http://instantclick.io/click-test" target="_blank">test yourself</a>)
                <br>
                Saves ~300 ms on unoptimized sites with touch device
                <br>
                Your Linux/Windows apps do that, too!
              </div>
            </li>
            <li>
              Links with <a href="http://unpoly.com/up-preload"><code>up-preload</code></a> attribute preload destination while hovering
              <div class='subtle'>
                Saves ~200-400 ms minus configured delay (<a href="http://instantclick.io/click-test" target="_blank">test yourself</a>)
              </div>
            </li>
            <li>
              <code>GET</code> requests are cached for 5 minutes
              <div class='subtle'>
                Any non-<code>GET</code> request clears the entire cache
              </div>
            </li>
          </ul>
        </section>
        <section>
          <p>
            Feel the response time of an Unpoly app by navigating between cards on
            <br>
            <a href="http://makandracards.com/makandra" target="_blank">makandracards.com/makandra</a>.
          </p>
        </section>
        <section>
          <h3>How you can optimize further</h3>
          <ul>
            <li>Server-side fragment caching (duh!)</li>
            <li>Tailor responses for the <code>X-Up-Target</code> header</li>
            <li>Spinners for long-running requests</li>
            <li>We can still implement client-side interactions</li>
            <li>Go nuclear with two-way bindings</li>
          </ul>
        </section>
        <section>
          <h3>Tailored responses</h3>
          <pre class='xxs'><code class='html' data-noescape>&lt;html&gt;&#x000A;&#x000A;  &lt;% if up.target?('head') %&gt;&#x000A;    &lt;%= render 'head' %&gt;&#x000A;  &lt;% end %&gt;&#x000A;&#x000A;  &lt;body&gt;&#x000A;&#x000A;    &lt;% if up.target?('.side') %&gt;&#x000A;      &lt;%= render 'side' %&gt;&#x000A;    &lt;% end %&gt;&#x000A;&#x000A;    &lt;% if up.target?('.main') %&gt;&#x000A;      &lt;%= yield %&gt;&#x000A;    &lt;% end %&gt;&#x000A;&#x000A;  &lt;/body&gt;&#x000A;&lt;/html&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Spinners</h3>
          <p>
            For the occasional long-running request, you can configure this globally:
          </p>
          <pre class='xs'><code class='html' data-noescape>&lt;div class="spinner"&gt;Please wait!&lt;/div&gt;&#x000A;</code></pre>
          <pre class='xs'><code class='javascript' data-noescape>up.compiler('.spinner', function($element) {&#x000A;  function show() { $element.show() };&#x000A;  function hide() { $element.hide() };&#x000A;  up.on('up:proxy:slow', show);&#x000A;  up.on('up:proxy:recover', hide);&#x000A;  hide();&#x000A;  return function() {&#x000A;    up.off('up:proxy:slow', show);&#x000A;    up.off('up:proxy:recover', hide);&#x000A;  };&#x000A;});&#x000A;</code></pre>
          <p>
            The <code>up:proxy:slow</code> event is triggered after 300 ms (configurable).
          </p>
        </section>
        <section>
          <h3>We can still implement interactions on the client</h3>
          <pre><code class='html' data-noescape>&lt;div class='greeter'&gt;&#x000A;  &lt;input class='greeter--input'>&#x000A;  Hello &lt;span class='greeter--name'&gt;&lt;span&gt;!&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>up.compiler('.greeter', function($element) {&#x000A;  var $input = $element.find('.greeter--input');&#x000A;  var $name = $element.find('.greeter--name');&#x000A;  $input.on('input', function() {&#x000A;    $name.text($input.val());&#x000A;  });&#x000A;});&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='subtle'>
              Going nuclear
            </div>
            <div class='line'>
              Two-way bindings
            </div>
          </h3>
          <p>
            With <a href="http://rivetsjs.com/">Rivets.js</a> (6 KB):
          </p>
          <pre><code class='html' data-noescape>&lt;div class='template' up-data='{ "name": "Arne" }'&gt;&#x000A;  &lt;input rv-value='name'>&#x000A;  Hello { name }!&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <pre><code class='javascript' data-noescape>up.compiler('.template', function($element, data) {&#x000A;  var view = rivets.bind($element, data);&#x000A;  return view.unbind;&#x000A;});&#x000A;&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h2>
            Composability
          </h2>
          <ul>
            <li>
              Homegrown UJS syntax usually lacks composability.
              <br>
              Changing that was a major design goal for Unpoly.
            </li>
            <li>
              Unpoly's default UJS behavior is a thin wrapper around a Javascript API.
            </li>
            <li>
              If the default UJS behavior doesn't fit your use case, you can use
              that Javascript API from your own code, or invent new UJS syntax.
            </li>
          </ul>
        </section>
        <section>
          <h3>
            <div class='line'>Dual interfaces</div>
          </h3>
          <h4 class='subtle'><u>U</u>nobtrusive</h4>
          <pre><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" up-target=".story"&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          <h4 class='subtle'><u>P</u>rogrammatic</h4>
          <pre><code class='javascript'>up.replace('.story', 'full.html');&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='line'>Dual interfaces</div>
          </h3>
          <h4 class='subtle'><u>U</u>nobtrusive</h4>
          <pre><code class='html' data-noescape>&lt;form up-target=".main"&gt;&#x000A;&#x000A;  ...&#x000A;&#x000A;&lt;/form&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;</code></pre>
          <h4 class='subtle'><u>P</u>rogrammatic</h4>
          <pre><code class='javascript'>up.submit('form', target: '.main');&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='line'>All Async actions return promises</div>
          </h3>
          <pre><code class='javascript'>up.replace('.story', 'full.html').then(function() {&#x000A;  // Fragments were loaded and swapped&#x000A;});&#x000A;</code></pre>
          <pre><code class='javascript'>up.morph('.old', '.new', 'cross-fade').then(function() {&#x000A;  // Transition has completed&#x000A;});&#x000A;</code></pre>
          <p>
            <a href="https://makandracards.com/curriculum/35275-javascript-writing-asynchronous-code" target="_blank">Curriculum lesson on promises</a>
          </p>
        </section>
        <section>
          <h3>
            <div class='line'>Invent your own UJS syntax</div>
          </h3>
          <h4 class='subtle'>HTML</h4>
          <pre><code class='html' data-noescape>&lt;a menu-link href="/details"&gt;Show more&lt;/span&gt;&#x000A;</code></pre>
          <h4 class='subtle'>Javascript</h4>
          <pre><code class='javascript'>up.compiler('[menu-link]', function($link) {&#x000A;  $link.on('click', function(event) {&#x000A;    event.preventDefault();&#x000A;    up.popup.attach($link, {&#x000A;      target: '.menu',&#x000A;      position: 'bottom-left',&#x000A;      animation: 'roll-down'&#x000A;    });&#x000A;  });&#x000A;});&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h3>The Javascript API is extensive</h3>
          <p>
            View full documentation of JS functions,<br> events and UJS selectors on
            <a href="http://unpoly.com/">unpoly.com</a>.
          </p>
        </section>
        <section>
          <h2>Animation</h2>
          <p>
            When a new element enters the DOM, you can <b>animate</b> the appearance:
          </p>
          <pre><code class='html' data-noescape>&lt;a href="/settings" up-modal=".menu" up-animation="fade-in"&gt;&#x000A;  Open settings&#x000A;&lt;/a&gt;&#x000A;&#x000A;</code></pre>
          <p>
            When you swap an element, you can <b>transition</b> between the old and new states:
          </p>
          <pre><code class='html' data-noescape>&lt;a href="/users" up-target=".list" up-transition="cross-fade"&gt;&#x000A;  Show users&#x000A;&lt;/a&gt;&#x000A;</code></pre>
          <p>
            Animations are implemented via CSS transforms on a 3D-accelerated layer.
          </p>
        </section>
        <section>
          <h2>Forms</h2>
          <p>
            Painful things with forms:
          </p>
          <ul>
            <li>Submitting a form via AJAX</li>
            <li>File uploads via AJAX</li>
            <li>Detecting redirects</li>
            <li>Dealing with validation errors</li>
            <li>Server-side validations without a page load</li>
            <li>Dependencies between fields</li>
            <li>Submitting a form within a modal and staying within the modal</li>
          </ul>
          <p>
            These are all solved by Unpoly.
          </p>
        </section>
        <section>
          <section>
            <h3>Ajax forms</h3>
            <p>
              A form with <code>up-target</code> will be submitted via AJAX
              and leave surrounding elements intact:
            </p>
            <pre><code class='html' data-noescape>&lt;form method="post" action="/users" <mark>up-target=".main"</mark>&gt;&#x000A;  ...&#x000A;&lt;/form&gt;&#x000A;</code></pre>
            <p>A successful submission (status 200) will update <code>.main</code></p>
            <p>
              A failed submission will (non-200 status) update the form itself
              <br>
              <span class='subtle'>
                (Or use an <code>up-fail-target</code> attribute)
              </span>
            </p>
          </section>
          <section>
            <h3>Return non-200 status<br />when validations fail</h3>
            <pre><code class='ruby' data-noescape>class UsersController < ApplicationController&#x000A;&#x000A;  def create&#x000A;    user_params = params[:user].permit(:email, :password)&#x000A;    @user = User.new(user_params)&#x000A;    if @user.save?&#x000A;      sign_in @user&#x000A;    else&#x000A;      render 'form', <mark>status: :bad_request</mark>&#x000A;    end&#x000A;  end&#x000A;&#x000A;end&#x000A;</code></pre>
          </section>
        </section>
        <section>
          <h3>Forms within a modal</h3>
          <p>
            To <b>stay</b> within the modal, target a selector <b>within</b> the modal:
          </p>
          <pre><code class='html' data-noescape>&lt;form up-target=".selector-within-modal"&gt;&#x000A;  ...&#x000A;&lt;/form&gt;&#x000A;</code></pre>
          <p>
            To <b>close</b> the modal, target a selector <b>behind</b> the modal:
          </p>
          <pre><code class='html' data-noescape>&lt;form up-target=".selector-behind-modal"&gt;&#x000A;  ...&#x000A;&lt;/form&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Validations without a page load</h3>
          <pre class='s'><code class='html' data-noescape>&lt;form action="/users"&gt;&#x000A;&#x000A;  &lt;fieldset&gt;&#x000A;    &lt;label&gt;E-mail&lt;/label&gt;&#x000A;    &lt;input type="text" name="email" <mark>up-validate</mark>&gt;&#x000A;  &lt;/label&gt;&#x000A;&#x000A;  &lt;fieldset&gt;&#x000A;    &lt;label&gt;Password&lt;/label&gt;&#x000A;    &lt;input type="password" name="password"&gt;&#x000A;  &lt;/fieldset&gt;&#x000A;&#x000A;  &lt;button type="submit"&gt;Register&lt;/button&gt;&#x000A;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Validations without a page load</h3>
          <pre class='s'><code class='html' data-noescape>&lt;form action="/users"&gt;&#x000A;&#x000A;  <mark>&lt;fieldset&gt;                                    </mark>&#x000A;  <mark>  &lt;label&gt;E-mail&lt;/label&gt;                       </mark>&#x000A;  <mark>  &lt;input type="text" name="email" up-validate&gt;</mark>&#x000A;  <mark>&lt;/label&gt;                                      </mark>&#x000A;&#x000A;  &lt;fieldset&gt;&#x000A;    &lt;label&gt;Password&lt;/label&gt;&#x000A;    &lt;input type="password" name="password"&gt;&#x000A;  &lt;/fieldset&gt;&#x000A;&#x000A;  &lt;button type="submit"&gt;Register&lt;/button&gt;&#x000A;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Validations without a page load</h3>
          <pre class='s'><code class='html' data-noescape>&lt;form action="/users"&gt;&#x000A;&#x000A;  <mark>&lt;fieldset class="has-error"&gt;                                      </mark>&#x000A;  <mark>  &lt;label&gt;E-mail has already been taken!&lt;/label&gt;                   </mark>&#x000A;  <mark>  &lt;input type="text" name="email" up-validate value="foo@bar.com"&gt;</mark>&#x000A;  <mark>&lt;/label&gt;                                                          </mark>&#x000A;&#x000A;  &lt;fieldset&gt;&#x000A;    &lt;label&gt;Password&lt;/label&gt;&#x000A;    &lt;input type="password" name="password"&gt;&#x000A;  &lt;/fieldset&gt;&#x000A;&#x000A;  &lt;button type="submit"&gt;Register&lt;/button&gt;&#x000A;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Validations without a page load</h3>
          <pre><code class='ruby' data-noescape>class UsersController &lt; ApplicationController&#x000A;&#x000A;  def create&#x000A;    @user = User.new(user_params)&#x000A;    if up.validate?&#x000A;      @user.valid?  # run validations, but don't save to DB&#x000A;      render 'form' # render form with error messages&#x000A;    elsif @user.save?&#x000A;      sign_in @user&#x000A;    else&#x000A;      render 'form', status: :bad_request&#x000A;    end&#x000A;  end&#x000A;&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h3>Validations without a page load</h3>
          <pre><code class='ruby' data-noescape>class UsersController &lt; ApplicationController&#x000A;&#x000A;  def create&#x000A;    @user = User.new(user_params)&#x000A;    <mark>if up.validate?</mark>&#x000A;    <mark>  @user.valid? </mark> # run validations, but don't save to DB&#x000A;    <mark>  render 'form'</mark> # render form with error messages&#x000A;    elsif @user.save?&#x000A;      sign_in @user&#x000A;    else&#x000A;      render 'form', status: :bad_request&#x000A;    end&#x000A;  end&#x000A;&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='line'>Updating dependent fields</div>
            <div class='subtle'>Simple cases</div>
          </h3>
          <p>
            Use <a href="http://unpoly.com/up-switch" target="_blank"><code>[up-switch]</code></a> to show or hide existing elements based on a control value:
          </p>
          <pre><code class='html' data-noescape>&lt;select name="advancedness" up-switch=".target"&gt;&#x000A;  &lt;option value="basic"&gt;Basic parts&lt;/option&gt;&#x000A;  &lt;option value="advanced"&gt;Advanced parts&lt;/option&gt;&#x000A;&lt;/select&gt;&#x000A;&#x000A;&lt;div class="target" up-show-for="basic"&gt;&#x000A;  only shown for advancedness = basic&#x000A;&lt;/div&gt;&#x000A;&#x000A;&lt;div class="target" up-hide-for="basic"&gt;&#x000A;  hidden for advancedness = basic&#x000A;&lt;/div&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='line'>Updating dependent fields</div>
            <div class='subtle'>Harder cases</div>
          </h3>
          <p>
            Use <a href="http://unpoly.com/up-validate" target="_blank"><code>[up-validate]</code></a> to update a field from the server when a control value changes.
          </p>
          <p>
            In the example below we load a list of employees when the user selects a department:
          </p>
          <pre class='s'><code class='html' data-noescape>&lt;form action="/contracts"&gt;&#x000A;  &lt;select name="department" <mark>up-validate="[name=employee]"</mark>&gt;...&lt;/select&gt;&#x000A;  &lt;select name="employee"&gt;...&lt;/select&gt;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Getting started</h3>
          <ul>
            <li>Read through <a href="http://unpoly.com">unpoly.com</a></li>
            <li><code>gem 'unpoly-rails'</code> (<a href="http://unpoly.com/download">other methods</a>)</li>
            <li>Replace half your Javascript with <code>up-target</code> links</li>
            <li>Convert remaining Javascripts into <code>up.compiler</code></li>
          </ul>
        </section>
        <section>
          <img class='plain' src='pictures/logos/unpoly.png' width='50%'>
          <p>
            <a href='mailto:henning.koch@makandra.de'>henning.koch@makandra.de</a>
            <br>
            <a href='https://twitter.com/triskweline'>@triskweline</a>
          </p>
        </section>
        <section>
          <h2>Additional slides</h2>
        </section>
        <section>
          <section>
            <h3>Persisting elements</h3>
            <pre><code class='html' data-noescape>&lt;div class="story"&gt;&#x000A;&#x000A;  &lt;video <mark>up-keep</mark> src="movie.mp4"&gt;&lt;/video&gt;&#x000A;&#x000A;  &lt;p&gt;Story summary&lt;/p&gt;&#x000A;&#x000A;  &lt;a href="full.html" up-target=".story"&gt;&#x000A;    Read full story&#x000A;  &lt;/a&gt;&#x000A;&#x000A;&lt;/div&gt;&#x000A;&#x000A;&#x000A;&#x000A;</code></pre>
          </section>
          <section>
            <h2>Updating persisted elements</h2>
          </section>
          <section>
            <pre><code class='html' data-noescape>&lt;div class="map" up-data="[&#x000A;  { lat: 48.36, lng: 10.99 },&#x000A;  { lat: 48.75, lng: 11.45 }&#x000A;]"&gt;&lt;/div&gt;&#x000A;&#x000A;&lt;form method="post" action="/pins" <mark>up-target=".map"</mark>&gt;&#x000A;  Lat: &lt;input name="lat"&gt;&#x000A;  Lng: &lt;input name="lng"&gt;&#x000A;  &lt;button&gt;Add pin&lt;/button&gt;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, pins) {&#x000A;  var map = new google.maps.Map($element);&#x000A;  pins.forEach(function(pin) {&#x000A;    var position = new google.maps.LatLng(pin.lat, pin.lng);&#x000A;    new google.maps.Marker({&#x000A;      position: position,&#x000A;      map: map&#x000A;    });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <pre><code class='html' data-noescape>&lt;div class="map" up-data="&lt;%= @pins.to_json %&gt;"&gt;&lt;/div&gt;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&lt;form method="post" action="/pins" <mark>up-target=".map"</mark>&gt;&#x000A;  Lat: &lt;input name="lat"&gt;&#x000A;  Lng: &lt;input name="lng"&gt;&#x000A;  &lt;button&gt;Add pin&lt;/button&gt;&#x000A;&lt;/form&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, pins) {&#x000A;  var map = new google.maps.Map($element);&#x000A;  pins.forEach(function(pin) {&#x000A;    var position = new google.maps.LatLng(pin.lat, pin.lng);&#x000A;    new google.maps.Marker({&#x000A;      position: position,&#x000A;      map: map&#x000A;    });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <pre><code class='html' data-noescape>&lt;div class="map" up-data="&lt;%= @pins.to_json %&gt;"&gt;&lt;/div&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;&lt;%= form_for Pin.new, html: { 'up-target' =&gt; '.map' } do |form| %&gt;&#x000A;  Lat: &lt;%= form.text_field :lat %&gt;&#x000A;  Lng: &lt;%= form.text_field :lng %&gt;&#x000A;  &lt;%= form.submit 'Add pin' %&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, pins) {&#x000A;  var map = new google.maps.Map($element);&#x000A;  pins.forEach(function(pin) {&#x000A;    var position = new google.maps.LatLng(pin.lat, pin.lng);&#x000A;    new google.maps.Marker({&#x000A;      position: position,&#x000A;      map: map&#x000A;    });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <pre><code class='html' data-noescape>&lt;div class="map" up-data="&lt;%= @pins.to_json %&gt;"&gt;&lt;/div&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;&lt;%= form_for Pin.new, html: { 'up-target' =&gt; '.map' } do |form| %&gt;&#x000A;  Lat: &lt;%= form.text_field :lat %&gt;&#x000A;  Lng: &lt;%= form.text_field :lng %&gt;&#x000A;  &lt;%= form.submit 'Add pin' %&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, initialPins) {&#x000A;  var map = new google.maps.Map($element);&#x000A;  function renderPins(pins) { ... }&#x000A;  renderPins(initialPins);&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
          </section>
          <section>
            <pre><code class='html' data-noescape>&lt;div class="map" up-data="&lt;%= @pins.to_json %&gt;" <mark>up-keep</mark>&gt;&lt;/div&gt;&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;&lt;%= form_for Pin.new, html: { 'up-target' =&gt; '.map' } do |form| %&gt;&#x000A;  Lat: &lt;%= form.text_field :lat %&gt;&#x000A;  Lng: &lt;%= form.text_field :lng %&gt;&#x000A;  &lt;%= form.submit 'Add pin' %&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.map', function($element, initialPins) {&#x000A;  var map = new google.maps.Map($element);&#x000A;  function renderPins(pins) { ... }&#x000A;  renderPins(initialPins);&#x000A;  <mark>$element.on('up:fragment:keep', function(event) {</mark>&#x000A;  <mark>  renderPins(event.newData);                     </mark>&#x000A;  <mark>});                                              </mark>&#x000A;});&#x000A;&nbsp;&#x000A;&#x000A;&#x000A;</code></pre>
          </section>
        </section>
        <section>
          <h3>Find-as-you-type search</h3>
          <pre><code class='html' data-noescape>&lt;form action="/users" up-target=".list" <mark>up-autosubmit</mark>&gt;&#x000A;  &lt;input type="search" name="query" /&gt;&#x000A;&lt;/form&gt;&#x000A;&#x000A;&lt;div class="list"&gt;&#x000A;  &lt;% @users.each do |user| %&gt;&#x000A;    = link_to user.email, user&#x000A;  &lt;% end %&gt;&#x000A;&lt;/div&gt;&#x000A;&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h3>
            <div class='line'>Events</div>
          </h3>
          <pre><code class='javascript'>$(document).on('up:modal:open', function(event) {&#x000A;  if (dontLikeModals()) {&#x000A;    event.preventDefault();&#x000A;  }&#x000A;});&#x000A;</code></pre>
        </section>
        <section>
          <h3>Symmmetry to BEM blocks</h3>
          <pre><code class='nohighlight' data-noescape><b>app/assets/stylesheets/blocks</b>&#x000A;  head.css&#x000A;  map.css&#x000A;  photo_hero.css&#x000A;  screenshot.css&#x000A;  tail.css&#x000A;&#x000A;<b>app/assets/javascripts/compilers</b>&#x000A;  head.js&#x000A;  map.js&#x000A;  photo_hero.js&#x000A;  screenshot.js&#x000A;</code></pre>
        </section>
        <section>
          <section>
            <h2>
              <div class='line'>
                Memory leaks
              </div>
            </h2>
            <ul>
              <li>
                A regular Random.js app is <b>full of memory leaks</b>.
              </li>
              <li>
                We just don't notice because the Javascript VM is reset between page loads!
              </li>
              <li>
                We can't have memory leaks in persistent Javascript VMs
                <div class='subtle'>
                  like Angular.js, Unpoly, Turbolinks
                </div>
              </li>
              <li>
                Background: <a href="https://makandracards.com/makandra/31325-how-to-create-memory-leaks-in-jquery">one</a>,
                <a href="https://makandracards.com/makandra/31289-how-to-create-giant-memory-leaks-in-angularjs">two</a>.
              </li>
            </ul>
          </section>
          <section>
            <h3>Random.js</h3>
            <h4 class='subtle'>HTML</h4>
            <pre class='xs'><code class='html' data-noescape>&lt;clock&gt;&lt;/clock&gt;&#x000A;</code></pre>
            <h4 class='subtle'>Javascript</h4>
            <pre class='xs'><code class='javascript' data-noescape>$.unobtrusive(function() {&#x000A;  $(this).find('clock', function() {&#x000A;&#x000A;    var $clock = $(this);&#x000A;&#x000A;    function updateClock() {&#x000A;      var now = new Date();&#x000A;      $clock.html(now.toString());&#x000A;    }&#x000A;&#x000A;    setInterval(updateClock, 1000);&#x000A;&#x000A;  });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <h3>Random.js: <span class="red">Leaky</span></h3>
            <h4 class='subtle'>HTML</h4>
            <pre class='xs'><code class='html' data-noescape>&lt;clock&gt;&lt;/clock&gt;&#x000A;</code></pre>
            <h4 class='subtle'>Javascript</h4>
            <pre class='xs'><code class='javascript' data-noescape>$.unobtrusive(function() {&#x000A;  $(this).find('clock', function() {&#x000A;&#x000A;    var $clock = $(this);&#x000A;&#x000A;    function updateClock() {&#x000A;      var now = new Date();&#x000A;      $clock.html(now.toString());&#x000A;    }&#x000A;&#x000A;    <mark class="bad">setInterval(updateClock, 1000);</mark> // creates one interval per &lt;clock&gt;!&#x000A;&#x000A;  });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <h3>Unpoly compiler: <span class="red">Still leaky</span></h3>
            <h4 class='subtle'>HTML</h4>
            <pre class='xs'><code class='html' data-noescape>&lt;clock&gt;&lt;/clock&gt;&#x000A;</code></pre>
            <h4 class='subtle'>Javascript</h4>
            <pre class='xs'><code class='javascript' data-noescape>up.compiler('clock', function($clock) {&#x000A;&#x000A;  function updateClock() {&#x000A;    var now = new Date();&#x000A;    $clock.html(now.toString());&#x000A;  }&#x000A;&#x000A;  <mark class="bad">setInterval(updateClock, 1000);</mark> // this still leaks memory!&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
          </section>
          <section>
            <h3>Unpoly compiler: <span class="green">Clean</span></h3>
            <h4 class='subtle'>HTML</h4>
            <pre class='xs'><code class='html' data-noescape>&lt;clock&gt;&lt;/clock&gt;&#x000A;</code></pre>
            <h4 class='subtle'>Javascript</h4>
            <pre class='xs'><code class='javascript' data-noescape>up.compiler('clock', function($clock) {&#x000A;&#x000A;  function updateClock() {&#x000A;    var now = new Date();&#x000A;    $clock.html(now.toString());&#x000A;  }&#x000A;&#x000A;  var interval = setInterval(updateClock, 1000);&#x000A;&#x000A;  <mark>return function() { clearInterval(interval) };</mark> // clean up when destroyed&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
          </section>
          <section>
            <h3>Unpoly compiler: <span class="red">Leaky</span></h3>
            <pre><code class='javascript' data-noescape>up.compiler('textarea.wysiwyg', function($textarea) {&#x000A;  $textarea.redactor();&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
          </section>
          <section>
            <h3>Unpoly compiler: <span class="green">Clean</span></h3>
            <pre><code class='javascript' data-noescape>up.compiler('textarea.wysiwyg', function($textarea) {&#x000A;  $textarea.redactor();&#x000A;  return function() {&#x000A;    $textarea.redactor('destroy');&#x000A;  }&#x000A;});&#x000A;&#x000A;</code></pre>
          </section>
        </section>
        <section>
          <section data-background-color='#000'>
            <h3>Why transitions are hard</h3>
            <br>
            <div class='transition-issue-illustration' style='width: 960px; height: 460px'>
              <img src='pictures/transition_desired.svg' width='100%'>
            </div>
          </section>
          <section data-background-color='#000'>
            <h3>Why transitions are hard</h3>
            <br>
            <div class='transition-issue-illustration' style='width: 960px; height: 460px'>
              <img src='pictures/transition_naive.svg' width='100%'>
            </div>
          </section>
          <section>
            <h3>Ghosting</h3>
            <div class='ghosts'>
              <div class='ghosts--layer is-old'>
                Old
                <div class='ghosts--css'>
                  position: static<br>
                  display: hidden
                </div>
              </div>
              <div class='ghosts--layer is-new'>
                New
                <div class='ghosts--css'>
                  position: static<br>
                  opacity: 0
                </div>
              </div>
              <div class='ghosts--layer is-old-ghost'>
                Old (ghost)
                <div class='ghosts--css'>
                  position: absolute
                </div>
              </div>
              <div class='ghosts--layer is-new-ghost'>
                New (ghost)
                <div class='ghosts--css'>
                  position: absolute
                </div>
              </div>
            </div>
          </section>
          <section data-background-color='#000'>
            <h3>Without ghosting</h3>
            <br>
            <div class='transition-issue-illustration' style='width: 960px; height: 460px'>
              <img src='pictures/transition_naive.svg' width='100%'>
            </div>
          </section>
          <section data-background-color='#000'>
            <h3>With ghosting</h3>
            <br>
            <div class='transition-issue-illustration' style='width: 960px; height: 460px'>
              <img src='pictures/transition_desired.svg' width='100%'>
            </div>
          </section>
          <section>
            <div class='columns'>
              <div class='column'>
                <h4>Predefined animations</h4>
                <pre><code class='nohighlight' data-noescape>fade-in&#x000A;fade-out&#x000A;move-to-top&#x000A;move-from-bottom&#x000A;move-to-bottom&#x000A;move-from-top&#x000A;move-to-left&#x000A;move-from-right&#x000A;move-to-right&#x000A;move-from-left&#x000A;</code></pre>
              </div>
              <div class='column'>
                <h4>Predefined transitions</h4>
                <pre><code class='nohighlight' data-noescape>cross-fade&#x000A;move-top&#x000A;move-bottom&#x000A;move-left&#x000A;move-right&#x000A;</code></pre>
              </div>
            </div>
          </section>
          <section>
            <h3>Custom animations</h3>
            <pre><code class='javascript' data-noescape>up.animation('zoom-in', function($element, options) {&#x000A;&#x000A;  var firstFrame = {&#x000A;    opacity: 0,&#x000A;    transform: 'scale(0.5)'&#x000A;  };&#x000A;&#x000A;  var lastFrame = {&#x000A;    opacity: 1,&#x000A;    transform: 'scale(1)'&#x000A;  };&#x000A;&#x000A;  $element.css(firstFrame);&#x000A;  return up.animate($element, lastFrame, options);&#x000A;&#x000A;});&#x000A;</code></pre>
          </section>
        </section>
        <section>
          <section>
            <h3>
              <span class="subtle">Toggle all: </span> On load
            </h3>
            <pre><code class='html' data-noescape>&lt;span class="toggle-all"&gt;Toggle all&lt;/span&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>$(function() {&#x000A;  $('.toggle-all').each(function() {&#x000A;    var $link = $(this);&#x000A;    $link.on('click', function() {&#x000A;      var $form = $link.closest('form');&#x000A;      var $checkboxes = $form.find(':checkbox');&#x000A;      var someUnchecked = $checkboxes.is(':not(:checked)');&#x000A;      $checkboxes.prop('checked', someUnchecked);&#x000A;    });&#x000A;  });&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;</code></pre>
            <p>
              <a href="http://codepen.io/triskweline/pen/MyrVgG" target="_blank">Run example on codepen.io</a>.<br>
              This is what you see in jQuery tutorials.<br>
              HTML fragments loaded via AJAX don't get Javascriptified.
            </p>
          </section>
          <section>
            <h3>
              <span class="subtle">Toggle all: </span> Angular directive
            </h3>
            <pre><code class='html' data-noescape>&lt;span class="toggle-all"&gt;Toggle all&lt;/span&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>app.directive('toggle-all', function() {&#x000A;  return {&#x000A;    restrict: 'C',&#x000A;    link: function(scope, $link) {&#x000A;      $link.on('click', function() {&#x000A;        var $form = $link.closest('form');&#x000A;        var $checkboxes = $form.find(':checkbox');&#x000A;        var someUnchecked = $checkboxes.is(':not(:checked)');&#x000A;        $checkboxes.prop('checked', someUnchecked);&#x000A;      });&#x000A;    }&#x000A;  }&#x000A;});&#x000A;</code></pre>
            <p>
              It's nice how Angular lets us register a compiling function for a CSS selector.
              <br>
              Also we don't need to manually Javascriptify new fragments
              <br>
              as long as we insert them through Angular templates
            </p>
          </section>
          <section>
            <h3>
              <span class="subtle">Toggle all: </span> Unpoly compiler
            </h3>
            <pre><code class='html' data-noescape>&lt;span class="toggle-all"&gt;Toggle all&lt;/span&gt;&#x000A;</code></pre>
            <pre><code class='javascript' data-noescape>up.compiler('.toggle-all', function($link) {&#x000A;  $link.on('click', function() {&#x000A;    var $form = $link.closest('form');&#x000A;    var $checkboxes = $form.find(':checkbox');&#x000A;    var someUnchecked = $checkboxes.is(':not(:checked)');&#x000A;    $checkboxes.prop('checked', someUnchecked);&#x000A;  });&#x000A;});&#x000A;</code></pre>
            <p>
              Unpoly automatically compiles all fragments that it inserts or updates.
            </p>
          </section>
        </section>
        <section>
          <h3>Legacy browsers</h3>
          <p>
            Unpoly gracefully degrades with old versions of Internet Explorer:
          </p>
          <table>
            <tr>
              <th>Edge</th>
              <td>Full support</td>
            </tr>
            <tr>
              <th>IE 10</th>
              <td>Full support</td>
            </tr>
            <tr>
              <th>IE 9</th>
              <td>
                Page updates that change browser history<br>fall back to a classic page load.<br />
                Animations and transitions are skipped.
              </td>
            </tr>
            <tr>
              <th>IE8</th>
              <td>Unpoly prevents itself from booting,<br>leaving you with a classic server-side application</td>
            </tr>
          </table>
        </section>
        <section>
          <h3>Bootstrap integration</h3>
          <ul>
            <li>
              Include <a href="https://raw.githubusercontent.com/unpoly/unpoly/master/dist/unpoly-bootstrap3.js">unpoly-bootstrap3.js</a> and
              <a href="https://raw.githubusercontent.com/unpoly/unpoly/master/dist/unpoly-bootstrap3.css">unpoly-bootstrap3.css</a>
            </li>
            <li>
              Configures Unpoly to use Bootstrap styles for dialogs,<br />
              marking current navigation tabs, etc.
            </li>
            <li>
              Makes Unpoly aware of fixed Bootstrap layout components when scrolling the viewport.
            </li>
            <li>
              In general we try to not do things that would totally clash with Bootstrap.
            </li>
          </ul>
        </section>
        <section>
          <h3>Rails integration</h3>
          <p>
            Include <a href="http://www.rubydoc.info/gems/unpoly-rails/">unpoly-rails</a> In your <code>Gemfile</code>:
          </p>
          <pre class='xs'><code class='ruby'>gem 'unpoly-rails'&#x000A;</code></pre>
          <p>
            In your controllers, views and helpers:
          </p>
          <pre class='xs'><code class='ruby'>up?                            # request.headers['X-Up-Target'].present?&#x000A;up.target                      # request.headers['X-Up-Target']&#x000A;up.title = 'Title from server' # response.headers['X-Up-Title'] = 'Title ...'&#x000A;up.validate?                   # request.headers['X-Up-Validate'].present?&#x000A;</code></pre>
          <p>
            The gem also provides the JS and CSS assets for the latest Unpoly.
          </p>
        </section>
        <section>
          <h3>Other installation methods</h3>
          <ul>
            <li>
              <a href='http://unpoly.com/download#bower'>Install with Bower</a>
            </li>
            <li>
              <a href='http://unpoly.com/download#cdn'>Link to a CDN</a>
            </li>
            <li>
              <a href='http://unpoly.com/download#zip'>Download as ZIP</a>
            </li>
            <li>
              <a hrf='http://unpoly.com/download#git'>Clone with Git</a>
            </li>
          </ul>
          <p>
            Although the Rails bindings are nice, Unpoly works with any kind of backend.<br>
            E.g. <a href="http://unpoly.com">unpoly.com</a> is a static middleman site using Unpoly.
          </p>
        </section>
        <section>
          <section>
            <h3>Unit testing</h3>
            <p>
              Use <a href="http://jasmine.github.io/">Jasmine</a> to describe examples.<br />
              Use <a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a> to create sample elements.<br />
              Use <a href="http://unpoly.com/up.hello"><code>up.hello</code></a> to compile sample elements.
            </p>
            <pre class='xs'><code class='javascript' data-noescape>up.compiler('.current-year', function($element) {&#x000A;  var year = new Date().getFullYear();&#x000A;  $element.text(year);&#x000A;});&#x000A;</code></pre>
            <pre class='xs'><code class='javascript' data-noescape>describe('.current-year', function() {&#x000A;  it("displays today's year", function() {&#x000A;    $element = affix('.current-today');&#x000A;    up.hello($element);&#x000A;    year = new Date().getFullYear();&#x000A;    expect($element).toHaveText(year.toString());&#x000A;  });&#x000A;});&#x000A;</code></pre>
          </section>
          <section>
            <h3>Easier integration testing</h3>
            <p>
              Disable animation:
            </p>
            <pre><code class='ruby' data-noescape>up.motion.config.enabled = false;&#x000A;</code></pre>
            <p>
              Disable concurrent requests:
            </p>
            <pre><code class='ruby' data-noescape>up.proxy.config.maxRequests = 1;&#x000A;</code></pre>
            <p>
              Wait before you do things:
            </p>
            <pre class='xs'><code class='ruby' data-noescape>AfterStep do&#x000A;  sleep 0.05 while page.evaluate_script('window.up && up.proxy.isBusy()')&#x000A;end</code></pre>
            <p>
              (Or use <a href="https://github.com/makandra/spreewald#waiting-for-page-load"><code>patiently</code></a>).
            </p>
          </section>
          <section>
            <p>
              Use <a href="https://github.com/jasmine/jasmine-ajax">jasmine-ajax</a> to mock the network:
            </p>
            <pre class='xxs'><code class='javascript' data-noescape>up.compiler('.server-time', function($element) {&#x000A;  $element.text('Loading ...');&#x000A;  up.ajax('/time').then(function(time) { $element.text(time) };&#x000A;});&#x000A;</code></pre>
            <pre class='xxs'><code class='javascript' data-noescape>describe('.current-year', function() {&#x000A;  it('fetches and displays the current time from the server', function() {&#x000A;    jasmine.Ajax.install();&#x000A;    var $element = affix('.server-time');&#x000A;    up.hello($element);&#x000A;    expect($element).toHaveText('Loading...');&#x000A;    jasmine.Ajax.requests.mostRecent().respondWith({&#x000A;      status: 200,&#x000A;      contentType: 'text/plain',&#x000A;      responseText: '13:37:00'&#x000A;    });&#x000A;    expect($element).toHaveText('13:37:00');&#x000A;  });&#x000A;});&#x000A;&#x000A;</code></pre>
          </section>
        </section>
        <section>
          <h3>Who else went back?</h3>
          <ul>
            <li>
              <a href='https://engineering.shopify.com/17489056-rebuilding-the-shopify-admin-improving-developer-productivity-by-deleting-28-000-lines-of-javascript'>Shopify</a>
            </li>
            <li>
              Formkeep by Thoughtbot
            </li>
            <li>
              <a href='https://twitter.com/stympy/status/727495130018512897'>Honeybadger</a>
            </li>
            <li>
              <a href='https://www.betterment.com/resources/inside-betterment/engineering/server-javascript-a-single-page-app-toa-single-page-app/'>Betterment</a>
            </li>
          </ul>
        </section>
        <section>
          <h3>Project state</h3>
          <ul>
            <li>In development since October 2014</li>
            <li>
              ~ 500 specs
              <div class='subtle'>
                (how many specs has our Random.js?)
              </div>
            </li>
            <li>Has seen some real world pain, but we're still learning new things</li>
            <li><a href="http://unpoly.com/changelog">Changelog</a> lists breaking changes and compatible changes separately</li>
            <li><a href="http://unpoly.com/search/">API</a> marks features as either <i>stable</i> or <i>experimental</i>.</li>
            <li>There will be breaking changes, but always an upgrade path</li>
          </ul>
        </section>
        <section>
          <h3>
            <div class='line'>Repurpose existing UJS syntax</div>
          </h3>
          <h4 class='subtle'>HTML</h4>
          <pre><code class='html' data-noescape>&lt;a menu-link href="/details"&gt;Show more&lt;/span&gt;&#x000A;</code></pre>
          <h4 class='subtle'>Javascript</h4>
          <pre><code class='javascript'>up.macro('[menu-link]', function($link) {&#x000A;  $link.attr(&#x000A;    'up-target': '.menu',&#x000A;    'up-position': 'bottom-left',&#x000A;    'up-animation': 'roll-down'&#x000A;  });&#x000A;});&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&nbsp;&#x000A;&#x000A;&#x000A;&#x000A;</code></pre>
        </section>
        <section>
          <h3>Is Unpoly right for my project?</h3>
          <p>
             You are not writing super ambitious UI
            <br>
             You have some control over the UI requirements
            <br>
             You're ready to launch 100% of your Javascript from <code>up.compiler</code>
            <br>
             You're OK with dealing with the occasional breaking change
          </p>
          <p>
            Is your alternative home-growing an informal Random.js framework?
          </p>
        </section>
      </div>
    </div>
    <script src='lib/js/head.min.js'></script>
    <script src='js/reveal.js'></script>
    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
      
        transition: 'none', // none/fade/slide/convex/concave/zoom
      
        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });
    </script>
  </body>
</html>
